<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/resources/template/main-template.xhtml">
	<ui:define name="main">
		<div class="flex-column-center">
			<f:view>
				<div class="row-div padding-top-3rem margin-auto">
					<h3>#{msg['cart.title']}</h3>
				</div>
				
				<h:dataTable id="cartTable" value="#{loginBean.costumer.cartItemList}"
					var="oneCartItem" styleClass="cartTable"
					headerClass="cartTable-header"
					rowClasses="cartTable-odd-row,cartTable-even-row">
					<h:column>
						<f:facet name="header">#{msg['cart.quantity']}</f:facet>
						<h:inputText value="#{oneCartItem.quantity}" size="3">
							<f:convertNumber integerOnly="true" type="number" />
						</h:inputText>
					</h:column>
					
					<h:column>
						<f:facet name="header">#{msg['cart.prixBrute']}</f:facet>
						<h:outputText size="3" style="display:block;width:100px"
							value="#{oneCartItem.quantity * oneCartItem.article.price}">
							<f:convertNumber minFractionDigits="2" currencySymbol="€" type="currency" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.reduction']}</f:facet>
						<h:outputText size="3" style="display:block;width:100px"
							value="#{oneCartItem.item.discount
							* oneCartItem.quantity 
							* oneCartItem.item.price/100}"><f:convertNumber minFractionDigits="2"  currencySymbol="€" type="currency" />
						</h:outputText>

					</h:column>
					
					<h:column>
						<f:facet name="header">#{msg['cart.nom']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.name}" />

					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.description']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.description}" />
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.prix']}</f:facet>
						<h:outputText value="#{oneCartItem.item.price}">
						<f:convertNumber minFractionDigits="2"  currencySymbol="€" type="currency" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.discount']}</f:facet>
<!-- 						<h:outputText value="#{oneCartItem.article.discount}"/> -->
						<h:outputText value="-#{oneCartItem.item.discount}%">
						
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.stock']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.inventory}" />
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.salable']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.isSalable}" />
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.photo']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.picture}" />
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.video']}</f:facet>
						<h:outputLabel value="#{oneCartItem.item.video}" />
					</h:column>
					<h:column>
						<f:facet name="header">#{msg['cart.delete-item']}</f:facet>
						<h:commandLink value="#{msg['cart.delete-item']}"
							action="#{itemManagementBean.deleteItem(oneCartItem)}" />
					</h:column>
				</h:dataTable>
				
				
			</f:view>
		</div>
	</ui:define>
</ui:composition>

</html>